/* DesignPlayground.css */

@import './DesignPlaygroundToggles.css';

:root {
  --active-color: #03a9f4;
}

.playground-container {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 64px); /* Adjust based on header height */
  width: 100vw;
  background-color: #1e1e1e;
  color: white;
  overflow: hidden;
  position: fixed; /* Ensure it takes up window space */
  top: 64px; /* Start below main nav */
  left: 0;
}

.playground-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 2rem;
  background-color: #252525;
  border-bottom: 1px solid #333;
  height: 100px; /* Fixed height for header */
  box-sizing: border-box;
  position: relative; /* For absolute centering if needed, or just flex */
}

.playground-header h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
}

/* Spacer to balance the right side if needed, or just use absolute centering for middle */
.header-spacer {
  width: 200px;
}

.asset-selector-container {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  justify-content: center;
}

.asset-selector {
  display: flex;
  gap: 1.5rem;
}

.asset-option {
  width: 70px;
  height: 70px;
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  border: 3px solid transparent;
  transition: border-color 0.2s, transform 0.2s;
  background: #333;
}

.asset-option.active {
  border-color: var(--active-color);
  transform: scale(1.05);
}

.asset-option img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.playground-content {
  display: flex;
  flex: 1;
  overflow: hidden;
  height: calc(100% - 100px); /* Full height minus header */
}

/* Left Sidebar */
.design-selector {
  width: 250px;
  background-color: #252525;
  border-right: 1px solid #333;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  overflow-y: auto;
}

.design-selector h3 {
  margin: 0 0 1rem 0;
  font-size: 1rem;
  color: #aaa;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.design-option {
  padding: 1rem;
  background-color: #333;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.design-option:hover {
  background-color: #3d3d3d;
}

.design-option.active {
  background-color: #444;
  border-color: var(--active-color);
}

.design-name {
  font-weight: 600;
  margin-bottom: 0.25rem;
}

.design-dims {
  font-size: 0.8rem;
  color: #888;
}

/* Center Preview */
.preview-area {
  flex: 1;
  background-color: #1e1e1e;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  overflow: hidden; /* Prevent scroll here, we scale content */
  position: relative;
}

.preview-wrapper {
  box-shadow: 0 20px 50px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
  position: relative;
  /* Max dimensions to ensure it fits in viewport without scroll */
  max-width: 100%;
  max-height: 100%;
  display: flex;
}

.preview-image {
  display: block;
  border-radius: 4px;
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Double image technique for smooth transition */
.preview-image.previous {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 1;
}

.preview-image.current {
  position: relative;
  z-index: 2;
  opacity: 1;
  transition: opacity 0.3s ease;
}

/* When loading, keep current image visible but show spinner on top */
.preview-image.current.loading {
  /* We can keep it visible or hide it if we want to show Previous underneath.
     Since we have Previous underneath, we can fade out Current if it's 'loading' 
     BUT 'current' is the NEW URL. So if it's loading, it's not ready.
     So 'current' should be hidden until loaded. 
  */
  opacity: 0; 
}

.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  background: rgba(0,0,0,0.2); /* Slight dim */
  border-radius: 4px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: var(--active-color);
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Right Controls */
.controls-panel {
  width: 300px;
  background-color: #252525;
  border-left: 1px solid #333;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  overflow-y: auto;
}

.controls-panel h3 {
  margin: 0;
  font-size: 1rem;
  color: #aaa;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.control-group {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  margin-bottom: 1rem;
}

.control-group:last-child {
  margin-bottom: 0;
}

.control-group label {
  font-size: 0.9rem;
  font-weight: 500;
}

.control-group input {
  background-color: #333;
  border: 1px solid #444;
  border-radius: 6px;
  padding: 0.75rem;
  color: white;
  font-size: 1rem;
  transition: border-color 0.2s;
}

.control-group input:focus {
  outline: none;
  border-color: var(--active-color);
}

.control-section {
  margin-bottom: 1.5rem;
}

.control-section:last-of-type {
  margin-bottom: 0;
}

.section-title {
  font-size: 0.85rem;
  font-weight: 600;
  color: #888;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 0.75rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #333;
}

.generated-url {
  margin-top: auto;
  padding-top: 1rem;
  border-top: 1px solid #333;
}

.url-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.url-header label {
  font-size: 0.8rem;
  color: #888;
}

.copy-btn {
  background: transparent;
  border: 1px solid #444;
  color: #aaa;
  font-size: 0.7rem;
  padding: 2px 8px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}

.copy-btn:hover {
  border-color: var(--active-color);
  color: var(--active-color);
}

.url-display {
  border: 1px solid #444;
  border-radius: 4px;
  padding: 0.75rem;
  background-color: #1a1a1a;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
  font-size: 0.75rem;
  color: #ccc;
  line-height: 1.5;
  max-height: 200px;
  overflow-y: auto;
  overflow-x: auto;
  word-break: break-all;
  white-space: pre-wrap;
}

.url-display::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.url-display::-webkit-scrollbar-track {
  background: #1a1a1a;
  border-radius: 4px;
}

.url-display::-webkit-scrollbar-thumb {
  background: #444;
  border-radius: 4px;
}

.url-display::-webkit-scrollbar-thumb:hover {
  background: #555;
}

.broken-image-placeholder {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #2a2a2a;
  border: 2px dashed #555;
  border-radius: 4px;
  color: #888;
  z-index: 5;
}

.broken-icon {
  font-size: 3rem;
  margin-bottom: 0.5rem;
  opacity: 0.6;
}

.broken-text {
  font-size: 0.9rem;
  text-align: center;
  color: #999;
}
